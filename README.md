# Picture save helper bot

В VK у каждого пользователя есть специальный альбом "Сохранённые фотографии", куда он может сохранять изображения,
нажав на кнопку "Сохранить с себе" на любой фотографии. Но при этом нельзя сохранить фото, которые
пользователь отправляет кому-нибудь (или себе).

Из-за того ограничения приходится создавать фейковые страницы, либо закрытую группу с закрытым альбом,
загружать туда фотографию и только после этого сохранять свои фотография и изображения к себе.

Данный бот решает эту проблему. Он просто пересылает отправленное ему изображение обратно.
Теперь это изображение можно сохранить к себе в альбом.


## Запуск

В VK нужно создать свой паблик.

В настройках создать [токен](https://vk.com/dev/access_token?f=2.%20%D0%9A%D0%BB%D1%8E%D1%87%20%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0%20%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%B0) сообщества.

Создать адрес, например с помощью [ngrok](https://ngrok.com/) на 8000 порту.

Для запуска бота вам понадобится Python3.

Скачайте код с GitHub.

Установите зависимости:

`pip3 install -r requirements.txt`

Заполните `.env` файл переменными окружения.

Запустите скрипт с помощью команды:

`python3 manage.py runserver`

Подтвердить адрес через настройки паблика.

Отправьте боту изображение.


## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с остальными
скриптами и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Необходимые переменные:
- `VK_BOT_TOKEN` - можно получить через [настройки](https://vk.com/dev/access_token?f=2.%20%D0%9A%D0%BB%D1%8E%D1%87%20%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0%20%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%B0) паблика.
Находится в "Управление" > "Настройки" > "Работа с API" > "Ключи доступа".
При создании разрешить доступ к "Фотографиям" и "Сообщениям" сообщества.

- `VK_GROUP_ID` - id паблика.

- `VK_CONFIRMATION_CODE` - строка, которую должен вернуть бот для подтверждения адреса.
Находится в "Управление" > "Настройки" > "Работа с API" > "Callback API" > "Настройки сервера".

- `VK_SECRET_KEY` - находится там же где и `VK_CONFIRMATION_CODE` в поле ниже. Заполнить нужно самому.


## Используемые библиотеки

* [Django](https://pypi.org/project/Django/) - принимать запросы

* [vk-api](https://pypi.org/project/vk-api/) - для удобного обращения к API VK

* [requests](https://pypi.org/project/requests/) - для запросов к API, скачивания изображений

* [environs](https://pypi.org/project/python-dotenv/) - для обращения к переменным окружения
